# MobyDig API

## `class MobyDig`
Uses: class Spi2Parallel

Creates an object of type `MobyDig` to communicate with a particular [MobyDig 7-segment indicator modules](https://my.amperka.com/modules/mobydig).

### `MobyDig(uint8_t pinCS, uint8_t devicesCount = 1)`

Constructs a new object of data bus Hardware SPI with arguments:

- `pinCS`: pin Chip Select is used to control the shift-register latch. Any GPIO-pin can be used.
- `devicesCount`: quantity of the `MobyDig` modules connected in a chain: logical output pin of one module is connected to the input of another. If the `devicesCount` argument is omitted, it used only one module `MobyDig`.

### `MobyDig(uint8_t pinCS, uint8_t pinMOSI, uint8_t pinSCK, uint8_t devicesCount = 1)`

Constructs a new object of data bus Software SPI with arguments:

- `pinCS`: pin Chip Select is used to control the shift-register latch. Any GPIO-pin can be used.
- `pinMOSI`: pin MOSI is used to send the data to the peripherals. Any GPIO-pin can be used.
- `pinSCK`: pin the clock pulses which synchronize data transmission generated by the master. Any GPIO-pin can be used.
- `devicesCount`: quantity of MobyDig modules connected in one chain: logical output pin headers of one module to the inputs of another. If the `devicesCount` argument is omitted, it used only one `MobyDig` module.

The difference between the hardware and the software SPI is in transmission speed and availability. The software SPI will run much slower than the hardware SPI, but the hardware SPI works only with specific pins: `MOSI`, `MISO`(not used in `MobyDig`) and `SCK`. Use the software SPI only when the hardware SPI pins are already used by other devices.

### `void begin(char* resetValues = NULL)`

Initializes the given SPI interface, prepares the board for communication. Important, call this method at least once, in your `setup()`.

- `resetValues`: states of indicators by default as char 'c'-string. One byte for one 7-segment module. If `resetValues` argument is adjusted, then when start or calling method `reset()`, indicator modules sets value by `resetValues`. If `resetValues` argument is omitted — all indicators sets in `blank space` state.

### `void printf(const char* format, ...)`

Displays a 'c'-formatted string on a chain of `MobyDig` indicator modules. The format string syntax matches the standard C `printf` function.
The 7 segment indicator output supports digits, including floating-point, and limited support for English characters, with the exception of `K,M,N,V,W,X,Z`. Note that the display of letters on a 7-segment indicator does not always correspond to their generally accepted spelling.
Also supported are the characters: space, underscore, dot, minus, degree (at `^`). Unsupported characters are displayed as `blank space`.
Important: all Arduino xprintf functions does not support `%f` format specifier correctly, do the conversion to a string yourself and print the result as a string.

### `void setSegments(uint8_t device, uint8_t segments)`

Display any maybe not ordinary symbol to the specified position.
- `device` - `MobyDig` device number in chain. Can be in range [0 : devicesCount-1].
- `segments` - any symbol: one bit = one indicator segment. 0 - a, 1 - b ... 7 - h(dot).

### `void reset()`

Resets values all power switchers of all devices to default state.

- If the `resetValues` argument in the `begin(resetValues)` method is adjusted, indicator modules are set by the `resetValues`.
- If `resetValues` argument is omitted — all indicators sets in `blank space`.
