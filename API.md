# SegM8 API

## `class SegM8`

Creates an object of type `SegM8` to communicate with a chain of particular [SegM8 7-segment indicator modules](https://my.amperka.com/modules/SegM8).

### `SegM8(uint8_t pinCS, uint8_t deviceCount = 1)`

Constructs a new SegM8 object that uses the default hardware SPI bus.

- `pinCS`: the chip select (also known as slave select) pin is used to control the shift-register latch. It is marked `CS` on the SegM8 board. Any GPIO pin of the controller may be used.
- `deviceCount`: the number of SegM8 modules connected in a daisy-chain. If omitted, defines a single module.

### `SegM8(uint8_t pinCS, uint8_t pinDI, uint8_t pinCLK, uint8_t deviceCount = 1)`

Constructs a new SegM8 object that uses a software SPI bus.

- `pinCS`: the chip select (also known as slave select) pin is used to control the shift-register latch. It is marked `CS` on the SegM8 module. Any GPIO pin of the controller may be used.
- `pinDI`: the data input pin used to send data to the peripherals. It is marked `DI` on the SegM8 module. In SPI terms known as MOSI (Master Out Slave In). Any GPIO pin of the controller may be used.
- `pinCLK`: the clock pin is used to clock pulses that synchronize data transmission generated by the master. It is marked `CLK` on the SegM8 module. Also known as SCK in SPI terms. Any GPIO pin of the controller may be used.
- `deviceCount`: the number of SegM8 modules connected in a daisy-chain. If omitted, defines a single module.

The difference between hardware and software SPI is interaction speed. Software SPI runs slower than hardware SPI but hardware SPI works only on specific board pins: `MOSI`, `MISO` (not used in SegM8) and `SCK`.

### `void begin()`

Initializes the given interface, prepares the board for the communication, and sets all module segments to the 'dark' state.
Call this method before interacting with SegM8. For example, in the `setup()`.

### `void printf(const char* format, ...)`

Displays a 'c'-formatted string in a chain of `SegM8` indicator modules. The format string syntax matches the standard C `printf` function. For example: `Clock.printf("%2d:%2d",hours,minutes);`
The 7-segment indicator output supports digits, excluding floats, and limited support of English characters: except for `K,M,N,V,W,X,Z`. Note that the display of letters on a 7-segment indicator does not always correspond to their generally accepted look.
More supported characters: space, underscore, dot, minus, degree (at `^`). Unsupported characters are displayed as `blank space`.
**Important: Arduino `xprintf` functions do not support `%f` format specifier correctly. Convert float/double in a string before printing the result.**

### `void setSegments(uint8_t device, uint8_t segments)`

Displays a special symbol in the specified position, or controls special modules, i.e. [Octofet board](https://my.amperka.com/modules/octofet)), arranged in a daisy-chain. Special modules can be used to emulate unsupported symbols: colon, semi-colon, plus, asterisk, etc. via plane LEDs or any other simple indicators.
- `device` - `SegM8` the device number in a chain. Can be in the range [0 : devicesCount-1].
- `segments` - an 8-bit array. The ordinal number of the member of this array corresponds to the letter index of an indicator segment: 0 - a, 1 - b, <...>, 7 - h(dot).
